// Generated by CoffeeScript 1.6.2
(function() {
  var chat, dom, handleSubmit, setModel, setView, util;

  if (typeof tddjs === "undefined" || typeof document === "undefined") {
    return;
  }
  dom = tddjs.namespace("dom");
  util = tddjs.util;
  chat = tddjs.namespace("chat");
  if (!dom || !dom.addEventHandler || !util || !util.observable || !Object.create || !document.getElementsByTagName || !Function.prototype.bind) {
    return;
  }
  setView = function(element) {
    element.className = "js-chat";
    dom.addEventHandler(element, "submit", this.handleSubmit.bind(this));
    return this.view = element;
  };
  handleSubmit = function(event) {
    var userName;

    event.preventDefault();
    if (this.view) {
      userName = this.view.getElementsByTagName("input")[0].value;
      if (!userName) {
        return;
      }
      this.view.className = "";
      this.model.currentUser = userName;
      return this.notify("user", userName);
    }
  };
  setModel = function(model) {
    this.model = model;
  };
  chat.userFormController = tddjs.extend({}, util.observable);
  chat.userFormController.setView = setView;
  chat.userFormController.setModel = setModel;
  return chat.userFormController.handleSubmit = handleSubmit;
})();
